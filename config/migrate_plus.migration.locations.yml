uuid: 41d61215-b701-48fd-afdf-fbf2da0a6a93
langcode: en
status: true
dependencies:
  enforced:
    module:
      - hpc_api
_core:
  default_config_hash: mtKYZEcMqp3ofY8-3ebU1P98CAM75ZZVEm3DsAbN52Y
id: locations
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - 'HPC API'
migration_group: hpc_api_content
label: 'Locations from the HPC API'
source:
  plugin: hpc_api_url
  data_fetcher_plugin: hpc_api_http
  data_parser_plugin: hpc_api_endpoint
  track_changes: true
  endpoints:
    -
      endpoint: fts/location
  item_selector: data
  fields:
    -
      name: original_id
      label: 'Unique Location ID'
      selector: id
    -
      name: name
      label: Name
      selector: name
    -
      name: iso_3
      label: 'ISO 3 code'
      selector: iso3
  ids:
    original_id:
      type: integer
process:
  type:
    plugin: default_value
    default_value: location
  title: name
  field_original_id: original_id
  field_country_code_alpha3: iso_3
  uid:
    plugin: default_value
    default_value: 0
  sticky:
    plugin: default_value
    default_value: 0
  field_last_available_year:
    -
      plugin: retrieve_last_available_usage_year
      source: original_id
destination:
  plugin: 'entity:node'
  overwrite_properties:
    - title
    - field_original_id
    - field_country_code_alpha3
    - field_last_available_year
migration_dependencies: {  }
